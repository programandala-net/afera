

CODE CMOVE>  ( a1 a2 len -- )

  BC PUSH  IX PUSH  \ save the Forth registers

  ld l,c
  ld h,b
  pop bc
  pop de
  ex (sp),hl
c_move_up_.1:
  call move_block_upwards
  
  IX POP  BC POP  \ restore the Forth registers
  END-CODE

 \ Copied from: pForth V19 (by  Phil Burk)
: MOVE  ( a1 a2 len -- )
	>R 2DUP - 0<
	IF   R> CMOVE>  ELSE  R> CMOVE  THEN  ;
